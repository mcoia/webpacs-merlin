<!-- MERLIN bib_display.html updated 080411 lee -->

<!-- Based on: SWAN bib_display.html updated 080514 lee -->

<!--{toplogo}-->

<!--{patron}-->

<!--{logout}-->

<br />

<!--{ifbibdisplay}-->

<!--{xif}-->

<div class="navigationRow">


<!-- this is the button set we'll hide it if the BIB has no items -->
<div id="smsfeatures">

<a href="#here" name="smsbutton" id="smsbutton" onClick="showsms();return false;"><img src="/screens/but_send.gif" border=0></a>&nbsp;&nbsp;
</div>



<!-- a quick script to hide the SMS menu if there are no items. same as the javascript in the SMS form, but it's really just to see if the items exist.  If they don't, we hide the buttons -->




<script>
document.ready = function() {
  var f = document.getElementById('bib_detail');
}
try { 
 var itms = document.getElementById('bib_items');
 var tr = itms.getElementsByTagName('TR');
  for(i = 1; i < tr.length; i++) {
    var x=tr[i].getElementsByTagName('TD');
    if (x.length == 3) {
      var loc = x[0].innerHTML.replace(/(<([^>]+)>|&nbsp;)/ig,"");
      var call = x[1].innerHTML.replace(/(<([^>]+)>|&nbsp;)/ig,"");
      var status = x[2].innerHTML.replace(/(<([^>]+)>|&nbsp;)/ig,"");
    }
 }	

} catch (e) {
//document.getElementById('smsfeatures').style.visibility='hidden';
};



</script>



<!--{navrow}-->




<br />

<!--{searchhistory}-->

<br />

</div>

<div class="bibSearchtool">

<!--{searchtool}-->

<!--{relsearch}-->

</div>

<div class="bibPager">

<!--{pager}-->

<br />

<!--{reslink}-->

<!--{innreach}-->

<br />

</div>

<div id="infoTable">

<!--{recordinfo:atpexz}-->

<div class="bibRecordLink">

<!--{recordlink}-->

</div>

<!--{linkeddocs}-->

<!--{URLS}-->

<!--{holdingslink}-->

<!--{bloblinks}-->

<!--{imagelinks}-->

<!--{artthumb}-->

<!--{booking}-->

<!--{holdings}-->

<div style="margin:5px;">

<!--{items}-->

</div>




<div>

<!--{orders}-->

</div>

<!--{ifTOC}-->

<!--{TOC}-->

<!--{xif}-->

<!--{recordinfo:rsyvnqwdmjbuiokflhg}-->

<!--{ifhasresourcetable}-->

<!--{resourcetable}-->

<!--{xif}-->

<!--{patronreviews}-->

<!--{patronreviewsfull}-->

<!--{xmlframe}-->

<!--{catedit}-->

</div>

<div id="sidebarContent">
  
<!--{ifhaspatrate}-->

<div class="rateLableWrapper">

<!--{ratings}-->

</div>

<!--{xif}-->

<!--{bibimage}-->

<!-- just a placeholder for the sms form -->
<div id='sms' style="visibility:hidden;display:none">
</div>

<div id="googlebooks" name="googlebooks"></div>

</div>

<br />

<br />

<div class="clear2"></div>

<div class="bibPager">

<!--{pager}-->

<br />

</div>

<div class="navigationRow">

<!--{navrow}-->

<br />

<!--{searchhistory}-->

</div>

<!-- Google Book Search viewability API script for bib record--> 
<script type='text/javascript'> 
    var ProcessResults = function(bookInfo) {
        var buttonImg = "<img src='/screens/googlebutton.gif' alt='Google Preview'>"
        var textGBS = "";
        for (ISBN in bookInfo) {
            document.getElementById('infoTable').style.width = '75%';
            document.getElementById('sidebarContent').style.width = '21%';
            var b = bookInfo[ISBN];
            var bookJacket =  "<img src='" + b.thumbnail_url + "&zoom=1'>";
            //form the text of Google Book contents
            if (b && (b.preview == "full")) {
               textGBS = "Full text at<br>";
               //"Google Book Search";
               document.getElementById("googlebooks").innerHTML = bookJacket + "<a target='_blank' href='" + b.preview_url + "'>" + textGBS + buttonImg + "</a>"
            }
            else if (b && (b.preview == "partial")) {
                textGBS = "Preview & search inside book at<br>"
                //"Preview at Google Book Search";
                document.getElementById("googlebooks").innerHTML = bookJacket + "<a target='_blank' href='" + b.preview_url + "'>" + textGBS + buttonImg + "</a>"
            }
            else if (b && (b.preview == "noview")) {
                textGBS = "Information at Google Book Search"
                if (b.thumbnail_url != undefined){
                  document.getElementById("googlebooks").innerHTML = bookJacket + "<a target='_blank' href='" + b.preview_url + "'>" + textGBS + buttonImg + "</a>"
                }else{
                  document.getElementById("googlebooks").innerHTML = "<a href='" + b.preview_url + "'>" + textGBS + buttonImg + "</a>" 
                }
            }
        }
    }

</script>

<script type='text/javascript'>
       
var ISBN = $(".bibInfoLabel:contains('ISBN')").siblings(".bibInfoData").text().replace(/[^0123456789]/g,"")

var cburl = "http://books.google.com/books";
// Retrieve the info for these bibkeys
var api_url = cburl + "?jscmd=viewapi&bibkeys=ISBN:" + ISBN;
var s = document.createElement("script");
s.setAttribute("type", "text/javascript");
//alert("searching for: " + ISBN);
s.setAttribute("src", "http://books.google.com/books?jscmd=viewapi&bibkeys=ISBN:" + ISBN + "&callback=ProcessResults");
document.documentElement.firstChild.appendChild(s);
//alert (api_url);

</script>
 
<script>

var itemLocation = $("tr.bibItemsEntry td:first").html()
if (itemLocation.indexOf("Marr Sound Archives RooBot") > 0){
  $.cookie('asrs', 'sound_archives');
}else if (itemLocation.indexOf("LaBudde Special Collections RooBot") > 0){
  $.cookie('asrs', 'special_collections');
}else if (itemLocation.indexOf("RooBot In-Library Use") > 0){
  $.cookie('asrs', 'in_use');
}else if (itemLocation.indexOf("RooBot") > 0){
  $.cookie('asrs', 'roobot');
}

</script>


<!--{botlogo}-->

